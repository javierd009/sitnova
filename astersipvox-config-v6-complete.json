[
  {
    "aecDelaySamples": 0,
    "aecEnabled": false,
    "aecStepSize": 0,
    "backgroundNoise": "",
    "backgroundNoiseVolume": "0.02",
    "contextApiAuth": null,
    "contextApiBodyTemplate": "",
    "contextApiEnabled": false,
    "contextApiInjectionPoint": "prompt_append",
    "contextApiMethod": "GET",
    "contextApiUrl": "",
    "corpusid": "",
    "description": "Portero Virtual SITNOVA - V6 Completo (2025-12-06)",
    "extensionEnabled": true,
    "extraTools": [
      {
        "description": "Busca residente. OBLIGATORIO antes de dar cualquier info.",
        "dynamicParameters": [
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "condominium_id",
            "required": true,
            "schema": {
              "description": "Siempre usar: default-condo-id",
              "type": "string"
            }
          },
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "query",
            "required": true,
            "schema": {
              "description": "Nombre o numero de casa",
              "type": "string"
            }
          }
        ],
        "http": {
          "baseUrlPattern": "https://api.sitnova.integratec-ia.com/tools/buscar-residente",
          "httpMethod": "POST"
        },
        "modelToolName": "lookup_resident",
        "timeout": "5s"
      },
      {
        "description": "Envia WhatsApp. Solo despues de lookup_resident exitoso.",
        "dynamicParameters": [
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "apartamento",
            "required": true,
            "schema": {
              "description": "Casa del residente",
              "type": "string"
            }
          },
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "nombre_visitante",
            "required": true,
            "schema": {
              "description": "Nombre del visitante",
              "type": "string"
            }
          },
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "cedula",
            "required": true,
            "schema": {
              "description": "Cedula del visitante",
              "type": "string"
            }
          },
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "motivo_visita",
            "required": true,
            "schema": {
              "description": "Motivo de visita",
              "type": "string"
            }
          }
        ],
        "http": {
          "baseUrlPattern": "https://api.sitnova.integratec-ia.com/tools/notificar-residente",
          "httpMethod": "POST"
        },
        "modelToolName": "notificar_residente",
        "timeout": "5s"
      },
      {
        "description": "Verifica autorizacion. Llamar varias veces.",
        "dynamicParameters": [
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "apartamento",
            "required": true,
            "schema": {
              "description": "Casa del residente",
              "type": "string"
            }
          }
        ],
        "http": {
          "baseUrlPattern": "https://api.sitnova.integratec-ia.com/tools/estado-autorizacion",
          "httpMethod": "POST"
        },
        "modelToolName": "estado_autorizacion",
        "timeout": "3s"
      },
      {
        "description": "Obtiene direcciones de la casa. Usar cuando visitante no sabe llegar.",
        "dynamicParameters": [
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "apartamento",
            "required": true,
            "schema": {
              "description": "Casa del residente",
              "type": "string"
            }
          }
        ],
        "http": {
          "baseUrlPattern": "https://api.sitnova.integratec-ia.com/tools/obtener-direccion",
          "httpMethod": "POST"
        },
        "modelToolName": "obtener_direccion",
        "timeout": "3s"
      },
      {
        "description": "Abre porton. Solo cuando autorizado.",
        "dynamicParameters": [
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "motivo",
            "required": false,
            "schema": {
              "description": "Motivo",
              "type": "string"
            }
          }
        ],
        "http": {
          "baseUrlPattern": "https://api.sitnova.integratec-ia.com/tools/abrir-porton",
          "httpMethod": "POST"
        },
        "modelToolName": "abrir_porton",
        "timeout": "5s"
      },
      {
        "description": "Transfiere a operador humano extension 1002.",
        "dynamicParameters": [
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "motivo",
            "required": false,
            "schema": {
              "description": "Motivo de transferencia",
              "type": "string"
            }
          }
        ],
        "http": {
          "baseUrlPattern": "https://api.sitnova.integratec-ia.com/tools/transferir-operador",
          "httpMethod": "POST"
        },
        "modelToolName": "transferir_operador",
        "timeout": "3s"
      },
      {
        "description": "Termina la llamada. Usar al final del proceso.",
        "dynamicParameters": [
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "motivo",
            "required": false,
            "schema": {
              "description": "Motivo",
              "type": "string"
            }
          }
        ],
        "http": {
          "baseUrlPattern": "https://api.sitnova.integratec-ia.com/tools/colgar-llamada",
          "httpMethod": "POST"
        },
        "modelToolName": "colgar_llamada",
        "timeout": "2s"
      }
    ],
    "greetingMessage": "",
    "languageHint": "es-US",
    "maxDuration": "1800s",
    "model": "fixie-ai/ultravox-70B",
    "noResponseFinalMessage": "",
    "noResponseMessage": "",
    "password": "Sitnova20",
    "recipientURI": "sip:1000@172.20.20.1",
    "recordingEnabled": false,
    "systemPrompt": "You are a multilingual security guard agent for a residential condominium in Costa Rica.\n\n=== TIME-BASED GREETING ===\nGreet based on current time (Costa Rica timezone):\n- 5:00-11:59 = Buenos dias / Good morning\n- 12:00-17:59 = Buenas tardes / Good afternoon\n- 18:00-4:59 = Buenas noches / Good evening\n\n=== LANGUAGE DETECTION ===\n1. DETECT visitor's language from their FIRST words\n2. RESPOND in the SAME language\n3. Supported: Spanish (default), English, Portuguese, French, Italian\n4. If unclear, use Spanish\n\n=== MAIN RULE ===\nNEVER invent information. ONLY say what tools return.\n\n=== ANTI-HALLUCINATION RULES ===\n1. You DON'T know any residents. NO names, NO houses.\n2. NEVER say a name or house unless lookup_resident returns it.\n3. NEVER invent directions. Use obtener_direccion tool.\n4. If lookup_resident says encontrado=false, say \"not found\".\n\n=== MANDATORY DATA ===\nBefore notifying resident, you MUST have:\n1. Visitor's full name\n2. ID number (cedula/passport)\n3. Reason for visit\n\n=== AUTOMATIC TRANSFER TO OPERATOR ===\nIMMEDIATELY call transferir_operador if:\n- Cannot understand visitor after 2 attempts\n- Visitor speaks unclear/unintelligible\n- Technical issues with tools\n- Visitor requests human operator\n- Any communication problem\nDO NOT ask - just transfer automatically.\n\n=== FLOW ===\n\nSTEP 1 - GREETING:\nSay time-appropriate greeting + \"A quien visita?\" / \"Who are you visiting?\"\n\nSTEP 2 - SEARCH:\nCall lookup_resident with visitor's answer.\n- If found: Confirm name and house from response\n- If not found: Ask for house number\n\nSTEP 3 - COLLECT DATA:\nAsk for (if not provided):\n- Full name\n- ID number (confirm digits)\n- Reason for visit\n\nSTEP 4 - NOTIFY:\nSay \"Contacting resident, one moment\"\nCall notificar_residente\n\nSTEP 5 - WAIT:\nCall estado_autorizacion repeatedly.\nSay waiting messages between calls:\n- \"Still waiting\"\n- \"Resident is reviewing\"\n- \"Thank you for your patience\"\n\nAfter 4-5 pendiente: \"Resident not responding. Connecting to operator.\"\nThen call transferir_operador (automatic, don't ask).\n\nSTEP 6 - AUTHORIZED:\nSay \"Access authorized\"\nAsk \"Do you know how to get to the house?\"\n- If YES: Call abrir_porton, say goodbye, call colgar_llamada\n- If NO: Call obtener_direccion, read the result, call abrir_porton, say goodbye, call colgar_llamada\n\nSTEP 7 - DENIED:\nSay \"Sorry, access denied. Have a good day.\"\nCall colgar_llamada\n\nSTEP 8 - TRANSFER:\nSay \"Connecting to operator\"\nCall transferir_operador\n\n=== ENDING CALLS ===\nALWAYS call colgar_llamada after:\n- Opening gate successfully\n- Access denied\n- Transfer completed\n\n=== EXAMPLES ===\n\n--- Greeting ---\n(Morning) \"Buenos dias, a quien visita?\"\n(Afternoon) \"Buenas tardes, a quien visita?\"\n(Evening) \"Buenas noches, a quien visita?\"\n(English) \"Good morning, who are you visiting?\"\n\n--- Successful flow ---\nVisitor: \"Maria Rodriguez\"\nYou: [lookup_resident]\nTool: {encontrado: true, apartamento: \"Casa 5\"}\nYou: \"Found Maria Rodriguez in Casa 5. Your full name please?\"\nVisitor: \"Carlos Mendez\"\nYou: \"Thank you. Your ID number?\"\nVisitor: \"123456\"\nYou: \"Confirmed 123456. Reason for visit?\"\nVisitor: \"Delivery\"\nYou: \"Thanks. Contacting resident...\"\n[notificar_residente]\nYou: \"Notified, waiting for response\"\n[estado_autorizacion]\nTool: {estado: \"autorizado\"}\nYou: \"Access authorized. Do you know how to get there?\"\nVisitor: \"No\"\n[obtener_direccion]\nTool: {direccion: \"Second house after pool\"}\nYou: \"Directions: Second house after pool\"\n[abrir_porton]\nYou: \"Gate opening. Have a good day.\"\n[colgar_llamada]\n\n--- Communication problem ---\nVisitor: \"[unintelligible]\"\nYou: \"Sorry, I didn't understand. Can you repeat?\"\nVisitor: \"[still unclear]\"\nYou: \"Connecting you to a human operator\"\n[transferir_operador] (automatic, no asking)\n\n--- Not found ---\nVisitor: \"Juan Perez\"\n[lookup_resident]\nTool: {encontrado: false}\nYou: \"Didn't find that name. Do you have the house number?\"\nNEVER invent: \"Juan Perez is in Casa 14\"\n\n=== STYLE ===\n- Short, polite responses\n- Match visitor's language\n- No long explanations\n- Never share phone numbers",
    "temperature": 0.2,
    "timeExceededMessage": "",
    "timezone": "America/Costa_Rica",
    "userSpeaksFirst": false,
    "username": "1000",
    "voice": "b084d8f2-c9f9-491c-8059-d39dde80d58b"
  }
]
