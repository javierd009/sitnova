[
  {
    "aecDelaySamples": 0,
    "aecEnabled": false,
    "aecStepSize": 0,
    "backgroundNoise": "",
    "backgroundNoiseVolume": "0.02",
    "contextApiAuth": null,
    "contextApiBodyTemplate": "",
    "contextApiEnabled": false,
    "contextApiInjectionPoint": "prompt_append",
    "contextApiMethod": "GET",
    "contextApiUrl": "",
    "corpusid": "",
    "description": "Portero Virtual SITNOVA - V14 Lite (mejoras foneticas + hangUp fix)",
    "extensionEnabled": true,
    "extraTools": [
      {
        "description": "Busca residente por NOMBRE o NUMERO DE CASA. Soporta variaciones foneticas (Daisy=Deisy, dese=DC). Usar cuando visitante dice nombre del residente o numero de casa.",
        "dynamicParameters": [
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "condominium_id",
            "required": true,
            "schema": {
              "description": "Siempre usar: default-condo-id",
              "type": "string"
            }
          },
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "query",
            "required": true,
            "schema": {
              "description": "Nombre del residente O numero de casa (ej: 'Maria Rodriguez' o 'casa 5' o '10')",
              "type": "string"
            }
          }
        ],
        "http": {
          "baseUrlPattern": "https://api.sitnova.integratec-ia.com/tools/buscar-residente",
          "httpMethod": "POST"
        },
        "modelToolName": "lookup_resident",
        "timeout": "5s"
      },
      {
        "description": "Verifica pre-autorizacion del visitante.",
        "dynamicParameters": [
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "nombre",
            "required": true,
            "schema": {
              "description": "Nombre del visitante",
              "type": "string"
            }
          },
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "cedula",
            "required": false,
            "schema": {
              "description": "Cedula del visitante (opcional)",
              "type": "string"
            }
          },
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "apartamento",
            "required": false,
            "schema": {
              "description": "Apartamento destino (opcional)",
              "type": "string"
            }
          }
        ],
        "http": {
          "baseUrlPattern": "https://api.sitnova.integratec-ia.com/tools/verificar-preautorizacion",
          "httpMethod": "POST"
        },
        "modelToolName": "verificar_preautorizacion",
        "timeout": "5s"
      },
      {
        "description": "Envia WhatsApp al residente. REQUIERE: apartamento, nombre_visitante, cedula, motivo_visita.",
        "dynamicParameters": [
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "apartamento",
            "required": true,
            "schema": {
              "description": "Casa del residente",
              "type": "string"
            }
          },
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "nombre_visitante",
            "required": true,
            "schema": {
              "description": "Nombre completo del visitante",
              "type": "string"
            }
          },
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "cedula",
            "required": true,
            "schema": {
              "description": "Numero de cedula del visitante",
              "type": "string"
            }
          },
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "motivo_visita",
            "required": true,
            "schema": {
              "description": "Motivo de la visita",
              "type": "string"
            }
          }
        ],
        "http": {
          "baseUrlPattern": "https://api.sitnova.integratec-ia.com/tools/notificar-residente",
          "httpMethod": "POST"
        },
        "modelToolName": "notificar_residente",
        "timeout": "5s"
      },
      {
        "description": "Verifica respuesta del residente. Llamar cada 5 segundos, max 6 veces (30 seg total).",
        "dynamicParameters": [
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "apartamento",
            "required": true,
            "schema": {
              "description": "Casa del residente",
              "type": "string"
            }
          }
        ],
        "http": {
          "baseUrlPattern": "https://api.sitnova.integratec-ia.com/tools/estado-autorizacion",
          "httpMethod": "POST"
        },
        "modelToolName": "estado_autorizacion",
        "timeout": "3s"
      },
      {
        "description": "Obtiene instrucciones para llegar a la casa.",
        "dynamicParameters": [
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "apartamento",
            "required": true,
            "schema": {
              "description": "Casa del residente",
              "type": "string"
            }
          }
        ],
        "http": {
          "baseUrlPattern": "https://api.sitnova.integratec-ia.com/tools/obtener-direccion",
          "httpMethod": "POST"
        },
        "modelToolName": "obtener_direccion",
        "timeout": "3s"
      },
      {
        "description": "Abre el porton. Despues de abrir SIEMPRE di despedida y usa hangUp.",
        "dynamicParameters": [
          {
            "location": "PARAMETER_LOCATION_BODY",
            "name": "motivo",
            "required": false,
            "schema": {
              "description": "Motivo de apertura",
              "type": "string"
            }
          }
        ],
        "http": {
          "baseUrlPattern": "https://api.sitnova.integratec-ia.com/tools/abrir-porton",
          "httpMethod": "POST"
        },
        "modelToolName": "abrir_porton",
        "timeout": "5s"
      }
    ],
    "selectedTools": [
      {
        "toolName": "hangUp",
        "descriptionOverride": "TERMINA LA LLAMADA. Usar despues de abrir porton o denegar acceso. Secuencia: abrir_porton -> 'Adelante, buen dia' -> hangUp"
      },
      {
        "toolName": "transfer_call",
        "descriptionOverride": "TRANSFIERE AL OPERADOR (ext 1002). Usar cuando: residente no responde (30seg), no entiendes visitante, error tecnico, visitante pide operador.",
        "parameterOverrides": {
          "destination": "1002"
        }
      }
    ],
    "greetingMessage": "",
    "languageHint": "es-US",
    "maxDuration": "1800s",
    "model": "fixie-ai/ultravox-70B",
    "noResponseFinalMessage": "Le comunico con un operador.",
    "noResponseMessage": "Sigue ahi?",
    "password": "Sitnova20",
    "recipientURI": "sip:1000@172.20.20.1",
    "recordingEnabled": false,
    "systemPrompt": "<role>\nEres el portero virtual de {{CONDOMINIUM_NAME}}. Verificas visitantes y controlas acceso.\n</role>\n\n<critical_rules>\n1. NUNCA quedarte en silencio - si no sabes que hacer, usa transfer_call a 1002\n2. NUNCA inventar info - solo usa datos de tools\n3. NUNCA repetir frases\n4. NUNCA preguntar lo que ya dijeron\n5. UNA respuesta corta por turno\n6. SIEMPRE terminar con hangUp o transfer_call\n7. Capturar info PASO A PASO\n8. Si dicen nombre de residente -> lookup_resident INMEDIATAMENTE\n9. Despues de abrir_porton -> despedida -> hangUp\n10. Despues de denegar -> despedida -> hangUp\n</critical_rules>\n\n<greeting>\n\"[SALUDO], bienvenido a {{CONDOMINIUM_NAME}}, a quien visita?\"\n- 05:00-11:59: Buenos dias\n- 12:00-17:59: Buenas tardes\n- 18:00-04:59: Buenas noches\n</greeting>\n\n<memory>\nGUARDAR todo lo que dice visitante:\n- RESIDENTE_BUSCADO: nombre del residente (ej: \"DC Colorado\", \"Daisy Colorado\")\n- NOMBRE_VISITANTE: nombre del visitante\n- DESTINO: numero de casa\n- CEDULA: identificacion\n- MOTIVO: razon de visita\n\nFONETICA: Daisy=Deisy, dese=DC, disi=DC (el backend las corrige automaticamente)\n</memory>\n\n<cedula>\nConfirmar digito por digito con pausas:\n\"Confirmo: uno... dos... tres... cuatro... cinco... seis. Correcto?\"\n</cedula>\n\n<tools>\nHTTP: lookup_resident, verificar_preautorizacion, notificar_residente, estado_autorizacion, obtener_direccion, abrir_porton\nBuilt-in: hangUp (terminar), transfer_call (operador 1002)\n</tools>\n\n<flow>\n1. SALUDO: \"[Saludo], bienvenido, a quien visita?\"\n2. BUSCAR: lookup_resident con nombre O numero de casa\n3. DATOS: Pedir uno a la vez: nombre, cedula (confirmar digitos), motivo\n4. NOTIFICAR: \"Contactando...\" + notificar_residente\n5. ESPERAR: estado_autorizacion (max 6 veces / 30 seg)\n6. AUTORIZADO: \"Acceso autorizado\" -> abrir_porton -> \"Adelante, buen dia\" -> hangUp\n7. DENEGADO: \"Acceso denegado. Buen dia\" -> hangUp\n8. TIMEOUT: \"Residente no responde. Le comunico con operador\" -> transfer_call\n</flow>\n\n<examples>\n--- Flujo completo ---\nTu: \"Buenas tardes, bienvenido a Los Jardines, a quien visita?\"\nVisitante: \"Daisy Colorado\"\n[lookup_resident \"Daisy Colorado\"] -> Deisy Colorado, casa 15\nTu: \"Deisy Colorado, casa 15. Su nombre?\"\nVisitante: \"Juan Perez\"\nTu: \"Cedula?\"\nVisitante: \"123456\"\nTu: \"Confirmo: uno... dos... tres... cuatro... cinco... seis. Correcto?\"\nVisitante: \"Si\"\nTu: \"Motivo?\"\nVisitante: \"Visita\"\nTu: \"Contactando al residente...\"\n[notificar_residente]\n[estado_autorizacion] -> autorizado\nTu: \"Acceso autorizado. Conoce como llegar?\"\nVisitante: \"Si\"\n[abrir_porton]\nTu: \"Adelante, buen dia.\"\n[hangUp]\n\n--- Denegado ---\n[estado_autorizacion] -> denegado\nTu: \"Acceso denegado. Buen dia.\"\n[hangUp]\n\n--- Timeout ---\n[estado_autorizacion x6] -> pendiente\nTu: \"Residente no responde. Le comunico con operador.\"\n[transfer_call 1002]\n</examples>\n\n<forbidden>\n- Inventar info\n- Silencio\n- Llamadas abiertas sin hangUp\n- Preguntar si quiere transferir\n- Repetir frases\n- Varias preguntas juntas\n</forbidden>",
    "temperature": 0.1,
    "timeExceededMessage": "Se acabo el tiempo. Le comunico con un operador.",
    "timezone": "America/Costa_Rica",
    "userSpeaksFirst": false,
    "username": "1000",
    "voice": "b084d8f2-c9f9-491c-8059-d39dde80d58b"
  }
]
